var VentasPorMultiploServicio=function(){function n(){}return n.prototype.verificarVentasPorMultiploSkuUm=function(n,t,i,r){var f=new Operacion,u=new VentaPorMultiplo;try{SONDA_DB_Session.transaction(function(e){var o=[];o.push("SELECT");o.push(" M.SALES_BY_MULTIPLE_LIST_ID");o.push(" ,M.CODE_SKU");o.push(" ,M.CODE_PACK_UNIT");o.push(" ,M.MULTIPLE");o.push(" ,M.PROMO_ID");o.push(" ,M.PROMO_NAME");o.push(" ,M.PROMO_TYPE");o.push(" ,M.FREQUENCY");o.push(" FROM SKU_SALES_BY_MULTIPLE_LIST_BY_SKU AS M");o.push(" INNER JOIN CLIENTS AS C ON(C.SALES_BY_MULTIPLE_LIST_ID = M.SALES_BY_MULTIPLE_LIST_ID)");o.push(" WHERE M.CODE_SKU = '"+t.sku+"' ");o.push(" AND M.CODE_PACK_UNIT = '"+t.unidadMedidaSeleccionada+"'");o.push(" AND C.CLIENT_ID = '"+n.clientId+"'");e.executeSql(o.join(""),[],function(n,r){if(r.rows.length>0){var f=r.rows.item(0);u.codeSku=f.CODE_SKU;u.codePackUnit=f.CODE_PACK_UNIT;u.multiple=parseInt(f.MULTIPLE);u.promoId=f.PROMO_ID;u.promoName=f.PROMO_NAME;u.promoType=f.PROMO_TYPE;u.frequency=f.FREQUENCY;u.apply=!0;i(u)}else u.codeSku=t.sku,u.codePackUnit=t.codePackUnit,u.multiple=0,u.apply=!1,i(u)},function(n,t){f.codigo=t.code;f.mensaje=t.message;f.resultado=ResultadoOperacionTipo.Error;r(f)})},function(n){f.codigo=-1;f.mensaje=n.message;f.resultado=ResultadoOperacionTipo.Error;r(f)})}catch(e){f.codigo=-1;f.mensaje=e.message;f.resultado=ResultadoOperacionTipo.Error;r(f)}},n.prototype.validarSiTieneVentaPorMultiplo=function(n,t,i,r,u,f){try{i===null||i===undefined?u(!1,i,r):SONDA_DB_Session.transaction(function(f){var e=[];e.push("SELECT SM.SALES_BY_MULTIPLE_LIST_ID");e.push(" FROM SKU_SALES_BY_MULTIPLE_LIST_BY_SKU SM");e.push(" WHERE SM.SALES_BY_MULTIPLE_LIST_ID = "+n.salesByMultipleListId);e.push(" AND SM.CODE_SKU = '"+t.sku+"'");e.push(" AND SM.CODE_PACK_UNIT = '"+i.codePackUnit+"'");f.executeSql(e.join(""),[],function(n,t){t.rows.length>0?u(!0,i,r):u(!1,i,r)})},function(n){var t=new Operacion;t.codigo=-1;t.mensaje=n.message;console.log(t);f(t)})}catch(o){var e=new Operacion;e.codigo=-1;e.mensaje="Error al obtneer si usa multiplo: "+o.message;console.log(e.mensaje);f(e)}},n.prototype.obtenerVentaPorMultiploDeSkuConUnidadDeMedida=function(n,t,i,r,u,f){try{SONDA_DB_Session.transaction(function(f){var e=[];e.push("SELECT SM.MULTIPLE");e.push(" FROM SKU_SALES_BY_MULTIPLE_LIST_BY_SKU SM");e.push(" WHERE SM.SALES_BY_MULTIPLE_LIST_ID = "+n.salesByMultipleListId);e.push(" AND SM.CODE_SKU = '"+t+"'");e.push(" AND SM.CODE_PACK_UNIT = '"+i+"'");f.executeSql(e.join(""),[],function(n,t){if(t.rows.length>0){var i=t.rows.item(0);u(i.MULTIPLE,r)}else u(1,r)})},function(n){var t=new Operacion;t.codigo=-1;t.mensaje=n.message;console.log(t);f(t)})}catch(o){var e=new Operacion;e.codigo=-1;e.mensaje="Error al obtener el mutilplo: "+o.message;console.log(e.mensaje);f(e)}},n}();